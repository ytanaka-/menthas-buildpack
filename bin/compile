#!/bin/bash
# bin/compile <build-dir> <cache-dir> <env-dir>

working=$(pwd)
mkdir -p "$2"
build=$(cd "$1/" && pwd)
cache=$(cd "$2/" && pwd)
env=$(cd "$3/" && pwd)
S3_BUCKET=https://menthas.s3-ap-northeast-1.amazonaws.com
DICT_FILE=dict.zip
MODEL_FILE=wiki-deepwalk.model

echo "download from ${S3_BUCKET}/${MODEL_FILE}"
curl -O "${S3_BUCKET}/${MODEL_FILE}"
mv $MODEL_FILE ${build}/src/etc/model/

echo "download from ${S3_BUCKET}/${DICT_FILE}"
curl -O "${S3_BUCKET}/${DICT_FILE}"
mkdir -p ${build}/dict
mv ${DICT_FILE} ${build}/dict/
unzip ${build}/dict/${DICT_FILE}